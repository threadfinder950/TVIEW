"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseParser = void 0;
var Person_1 = require("./Person");
var BaseParser = /** @class */ (function () {
    function BaseParser(gedcom) {
        var _this = this;
        this.gedcom = {};
        this.currentPerson = new Person_1.Person('');
        var gedcomLinesArr = gedcom.toString()
            .trim()
            .split("\n");
        gedcomLinesArr.reduce(function (currentId, line) {
            var id = _this.lineToRow(line);
            return id ? id : currentId;
        }, '');
    }
    Object.defineProperty(BaseParser.prototype, "data", {
        get: function () {
            return this.gedcom;
        },
        enumerable: false,
        configurable: true
    });
    BaseParser.prototype.lineToRow = function (line) {
        var split = line.trim().split(' ');
        var level = parseInt(split.shift());
        var tag = split.shift();
        var id;
        var value;
        if (tag.startsWith("@")) {
            id = tag;
            tag = split.shift();
        }
        this.formatLineValue(id, level, tag, split);
        return id;
    };
    return BaseParser;
}());
exports.BaseParser = BaseParser;
